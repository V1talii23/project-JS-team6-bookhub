import{a as H,S as ne,N as se,P as re,K as ie,A as ae}from"./assets/vendor-Dg7flFYi.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))c(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const p of s.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();document.addEventListener("DOMContentLoaded",()=>{const t=new IntersectionObserver(r=>{r.forEach((c,i)=>{c.isIntersecting&&(setTimeout(()=>c.target.classList.add("visible"),i*200),t.unobserve(c.target))})},{threshold:.2});document.querySelectorAll(".section").forEach(r=>t.observe(r))});const b=document.querySelector(".contact-modal"),we=document.querySelectorAll(".open-modal"),Le=b.querySelector(".close-modal"),ce=document.body.style,le=document.documentElement.style;we.forEach(e=>{e.addEventListener("click",()=>{var c;const t=((c=e.closest(".category"))==null?void 0:c.dataset.category)||"Default",r=b.querySelector(".title");r.textContent=t,b.classList.remove("hidden"),J()})});Le.addEventListener("click",()=>{V(),E()});b.addEventListener("click",e=>{e.target.closest(".register-contact-modal")||V()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!b.classList.contains("hidden")&&(V(),E())});const C=b.querySelector("form");C.addEventListener("submit",e=>{e.preventDefault();const t=C.elements.name.value.trim(),r=C.elements.email.value.trim(),c=C.elements.message.value.trim();if(!t||!r){alert("Please fill in all fields");return}console.log("Form data:",{name:t,email:r,message:c||""}),alert("Your message has been sent!"),V(),E(),C.reset()});function J(){ce.overflow="hidden",le.overflow="hidden"}function E(){ce.overflow="auto",le.overflow="auto"}function V(){b.classList.add("hidden"),E()}const Ee=document.querySelector(".mobile-menu"),Se=document.querySelector(".btn-burger"),xe=document.querySelector(".close-header-btn"),Ae=Array.from(document.querySelectorAll(".mobile-nav-link")),X=()=>Ee.classList.toggle("is-open");Se.addEventListener("click",()=>{J(),X()});xe.addEventListener("click",()=>{E(),X()});Ae.forEach(e=>{e.addEventListener("click",()=>{E(),X()})});const q=document.querySelectorAll(".slide"),w=document.querySelector(".hero-swiper-btn-prev"),L=document.querySelector(".hero-swiper-btn-next");let f=0;function _(e){console.log("Показываем слайд:",e),q.forEach((t,r)=>{t.classList.remove("active"),t.setAttribute("aria-hidden","true"),r===e&&(t.classList.add("active"),t.setAttribute("aria-hidden","false"),console.log("Активирован слайд:",r,t.className))})}function K(){!w||!L||(w.disabled=f===0,w.classList.toggle("arrow--disabled",f===0),L.disabled=f===q.length-1,L.classList.toggle("arrow--disabled",f===q.length-1))}function te(e){e.disabled||(e.classList.add("is-active"),e.blur(),setTimeout(()=>{e.classList.remove("is-active")},100))}q.length>0&&w&&L&&(_(f),K(),w.addEventListener("click",()=>{f>0&&(f=f-1,_(f),K(),te(w))}),L.addEventListener("click",()=>{f<q.length-1&&(f=f+1,_(f),K(),te(L))}));H.defaults.baseURL="https://books-backend.p.goit.global";const Ce=document.querySelector(".books-list"),Be=document.querySelector(".books-show-counter"),j=document.querySelector("#categories-container"),z=document.querySelector("#page-next"),Me=10,qe=24,$e=4;let F=0,M=[],W=[],oe=R();async function Te(){try{const e=await H.get("/books/category-list");return console.log(e.data),e.data}catch(e){console.log(e.message)}}async function Pe(){try{const e=await H.get("/books/top-books");return console.log(e.data),e.data}catch(e){console.log(e.message)}}async function Ie(e){try{const t=await H.get(`/books/category/?category=${encodeURIComponent(e)}`);return console.log(t.data),t.data}catch(t){console.log(t.response.data.message||t.message)}}function R(){const e=window.innerWidth;return e<768?"mobile":e>=768&&e<1440?"tablet":"desktop"}function Oe(e){const t='<option value="" disabled selected>Categories</option>',r='<option value="All categories">All categories</option>',c=e.map(({list_name:i})=>i!==""?`<option value="${i}">${i}</option>`:"").join("");j.innerHTML=`<select class ="books-categories-select" name="categories" id="categories-select">${t+r+c}</select>`}function De(e){const r=[{list_name:"All categories"},...e].map(({list_name:c})=>c!==""?`<li class="categories-item" ><a class="category-link" data-category-name="${c}">${c}</a></li>`:"").join("");j.innerHTML=`<ul class="categories-list">${r}</ul>`}function Ne(e){Ce.innerHTML=e.map(({_id:t,book_image:r,title:c,author:i,price:s})=>`
        <li class="books-item" data-id=${t}>
          <img class="books-image" src="${r}" alt="${c}" />
          <div class="books-list-group">
          <div class="books-list-section"><h4 class="books-list-title">${c}</h4>
          <p class="books-list-author">${i}</p>
          </div>
          <p class="books-list-price">$${s}</p>
          </div>
          <button class="learn-more-btn" data-id=${t} type="button">Learn More</button>
        </li>
      `).join("")}function He(){U(),de()}function Ve(){const e=R();e!==oe&&(oe=e,He())}function je(e,t){Be.innerHTML=`Showing ${e} of ${t}`}async function Fe(){try{W=await Te(),de()}catch(e){console.log(e.message)}}function de(){R()==="desktop"?De(W):Oe(W)}async function Re(e){try{M=await Ie(e),F=0,U()}catch{}}async function ue(){try{M=(await Pe()).flatMap(t=>t.list_name!==""?t.books:[]),F=0,U()}catch{}}function U(){const e=R()==="mobile"?Me:qe,t=M.slice(0,e+F*$e);je(t.length,M.length),Ne(t),ze(t.length,M.length)}async function fe(e){e==="All categories"?ue():Re(e)}async function Ue(e){e.target.id==="categories-select"&&fe(e.target.value)}function _e(e){if(e.target.classList.contains("category-link")){const t=e.target.dataset.categoryName;fe(t)}}function Ke(){F++,U()}function ze(e,t){e<t?z.classList.remove("visually-hidden"):z.classList.add("visually-hidden")}function We(){Fe(),ue()}We();j.addEventListener("change",Ue);z.addEventListener("click",Ke);j.addEventListener("click",_e);window.addEventListener("resize",Ve);const B=new ne(".feedbacks-slider",{modules:[se,re,ie,ae],slidesPerView:1,spaceBetween:24,loop:!1,navigation:{nextEl:".feedbacks-swiper-btn-next",prevEl:".feedbacks-swiper-btn-prev",disabledClass:"arrow--disabled"},pagination:{el:".feedbacks-swiper-pagination",clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0,prevSlideMessage:"Попередній відгук",nextSlideMessage:"Наступний відгук"},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});function pe(){const e=document.querySelector(".feedbacks-swiper-btn-prev"),t=document.querySelector(".feedbacks-swiper-btn-next");e.disabled=B.isBeginning,t.disabled=B.isEnd,e.classList.toggle("arrow--disabled",B.isBeginning),t.classList.toggle("arrow--disabled",B.isEnd)}pe();B.on("slideChange",pe);const k=new ne(".events-swiper",{modules:[se,re,ie,ae],slidesPerView:1,spaceBetween:16,loop:!1,navigation:{nextEl:".events-swiper-btn-next",prevEl:".events-swiper-btn-prev",disabledClass:"arrow--disabled"},pagination:{el:".events-swiper-pagination",clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0,prevSlideMessage:"Попередні події",nextSlideMessage:"Наступні події"},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});function Y(){const e=document.querySelector(".events-swiper-btn-prev"),t=document.querySelector(".events-swiper-btn-next");!e||!t||(e.disabled=k.isBeginning,t.disabled=k.isEnd,e.classList.toggle("arrow--disabled",k.isBeginning),t.classList.toggle("arrow--disabled",k.isEnd))}k.on("init",Y);k.on("slideChange",Y);Y();(()=>{const e="https://books-backend.p.goit.global",t=o=>document.querySelector(o),r=(o="")=>String(o).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");function c(o,n=1400){const a=document.createElement("div");a.className="toast",a.textContent=o,Object.assign(a.style,{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"18px",background:"#222",color:"#fff",padding:"8px 12px",borderRadius:"8px",zIndex:12e3}),document.body.appendChild(a),setTimeout(()=>a.remove(),n)}async function i(o){const n=await fetch(o,{cache:"no-store"});if(!n.ok){const a=await n.text().catch(()=>null);throw new Error(a||`${n.status} ${n.statusText}`)}return n.json()}const s=t("#modal-backdrop"),p=t("#modal"),$=t("#modal-close"),S=t("#modal-cover"),T=t("#modal-title"),P=t("#modal-author"),I=t("#modal-price"),d=t("#quantity"),G=t("#increase"),Q=t("#decrease"),Z=t("#add-to-cart"),ee=t("#modal-form"),x=document.querySelector(".accordion-container");let y=null,O=null,v=[],D=null;s&&(s.classList.add("hidden"),s.setAttribute("aria-hidden","true")),document.body.addEventListener("click",o=>{const n=o.target.closest(".learn-more, .learn-more-btn");if(!n)return;const a=n.dataset.bookId||n.dataset.id||n.getAttribute("data-book-id")||n.getAttribute("data-id");if(!a){alert("ID книги не задано (data-book-id або data-id).");return}ge(a)});async function ge(o){if(!s||!p){console.warn("Modal DOM elements not found.");return}O=document.activeElement,s.classList.remove("hidden"),s.setAttribute("aria-hidden","false"),J(),T&&(T.textContent="Завантаження..."),P&&(P.textContent=""),I&&(I.textContent=""),S&&(S.src="/assets/fallback.jpg"),x&&Array.from(x.querySelectorAll(".ac-panel")).forEach(a=>a.innerHTML="");try{const n=await i(`${e}/books/${encodeURIComponent(o)}`);y=n,me(n),ke(),ve()}catch(n){console.error("Error fetching book:",n),alert("Не вдалося завантажити інформацію про книгу."),h()}}function me(o){const n=o.title||o.name||o.bookTitle||"",a=o.authors||o.author||(Array.isArray(o.authorsList)?o.authorsList.join(", "):""),g=o.price!==void 0&&o.price!==null?o.price:o.list_price||o.priceText||"",A=o.image||o.cover||(Array.isArray(o.images)?o.images[0]:o.imageUrl)||"/assets/fallback.jpg";S&&(S.src=A,S.alt=n||"book cover"),T&&(T.textContent=n||"Без назви"),P&&(P.textContent=a||""),I&&(I.textContent=typeof g=="number"?`$${g}`:g||""),d&&(d.value=1);const u=o.details||o.description||o.summary||o.about||"",l=o.shipping||o.shipping_info||o.delivery||"",m=o.returns||o.returnPolicy||o.refundPolicy||"";if(x){const N=x.querySelectorAll(".ac-panel");N.length>=3?(N[0].innerHTML=`<p class="ac-text">${r(u)}</p>`,N[1].innerHTML=`<p class="ac-text">${r(l)}</p>`,N[2].innerHTML=`<p class="ac-text">${r(m)}</p>`):x.innerHTML=`
          <div class="ac"><div class="ac-panel"><p class="ac-text">${r(u)}</p></div></div>
          <div class="ac"><div class="ac-panel"><p class="ac-text">${r(l)}</p></div></div>
          <div class="ac"><div class="ac-panel"><p class="ac-text">${r(m)}</p></div></div>
        `,ye()}}function h(){he(),s&&(s.classList.add("hidden"),s.setAttribute("aria-hidden","true")),document.documentElement.style.overflow="",document.body.style.overflow="",y=null;try{O&&typeof O.focus=="function"&&O.focus()}catch{}}s&&s.addEventListener("click",o=>{o.target===s&&h()}),$&&$.addEventListener("click",h),document.addEventListener("keydown",o=>{o.key==="Escape"&&s&&!s.classList.contains("hidden")&&h(),o.key==="Tab"&&D&&D(o)}),G&&G.addEventListener("click",()=>{d&&(d.value=Math.max(1,Number(d.value||1)+1))}),Q&&Q.addEventListener("click",()=>{d&&(d.value=Math.max(1,Number(d.value||1)-1))}),d&&d.addEventListener("input",()=>{const o=Number(d.value||0);(!Number.isFinite(o)||o<1)&&(d.value=1)}),Z&&Z.addEventListener("click",async()=>{const o=d?Math.max(1,Number(d.value||1)):1,n=be();console.log("Додано до кошика ",o,{action:"add_to_cart",bookId:n,quantity:o}),c("Додано до кошика")}),ee&&ee.addEventListener("submit",o=>{o.preventDefault(),d&&Math.max(1,Number(d.value||1)),alert("Дякуємо за покупку"),h()});function be(){return y&&(y._id||y.id||y.bookId)||null}function ye(){const o=document.querySelector(".accordion-container");if(!o)return;const n=["Details","Shipping","Returns"];Array.from(o.querySelectorAll(".ac")).forEach((g,A)=>{const u=g.querySelector(".ac-panel");let l=g.querySelector(".ac-header");l||(l=document.createElement("button"),l.type="button",l.className="ac-header",l.setAttribute("aria-expanded","false"),l.setAttribute("aria-controls",`ac-panel-${A}`),l.innerHTML=`<span class="ac-title">${n[A]||"Info"}</span><span class="ac-chevron">▾</span>`,u?g.insertBefore(l,u):g.appendChild(l)),u&&!u.id&&(u.id=`ac-panel-${A}`),u&&(u.style.display="none"),l.onclick=()=>{l.getAttribute("aria-expanded")==="true"?(l.setAttribute("aria-expanded","false"),l.querySelector(".ac-chevron").textContent="▾",u&&(u.style.display="none")):(l.setAttribute("aria-expanded","true"),l.querySelector(".ac-chevron").textContent="▴",u&&(u.style.display="block"))},l.addEventListener("keydown",m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),l.click())})})}function ve(){if(!p||(v=Array.from(p.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])')).filter(a=>a.offsetParent!==null),v.length===0))return;const o=v[0],n=v[v.length-1];D=function(a){a.key==="Tab"&&(a.shiftKey?document.activeElement===o&&(a.preventDefault(),n.focus()):document.activeElement===n&&(a.preventDefault(),o.focus()))};try{($||o).focus()}catch{}}function he(){D=null,v=[]}function ke(){try{($||p).focus()}catch{}}window._closeBookModal=h})();
//# sourceMappingURL=index.js.map
