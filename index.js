import{a as N,S as me,N as ge,P as ye,K as be,A as ve}from"./assets/vendor-Dg7flFYi.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const p of i.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&c(p)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function c(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{const o=new IntersectionObserver(s=>{s.forEach((c,r)=>{c.isIntersecting&&(setTimeout(()=>c.target.classList.add("visible"),r*200),o.unobserve(c.target))})},{threshold:.2});document.querySelectorAll(".section").forEach(s=>o.observe(s))});const y=document.querySelector(".contact-modal"),he=document.querySelectorAll(".open-modal"),ke=y.querySelector(".close-modal"),ee=document.body.style,te=document.documentElement.style;he.forEach(e=>{e.addEventListener("click",()=>{var c;const o=((c=e.closest(".category"))==null?void 0:c.dataset.category)||"Default",s=y.querySelector(".title");s.textContent=o,y.classList.remove("hidden"),oe()})});ke.addEventListener("click",()=>{H(),w()});y.addEventListener("click",e=>{e.target.closest(".register-contact-modal")||H()});document.addEventListener("keydown",e=>{e.key==="Escape"&&!y.classList.contains("hidden")&&(H(),w())});const x=y.querySelector("form");x.addEventListener("submit",e=>{e.preventDefault();const o=x.elements.name.value.trim(),s=x.elements.email.value.trim(),c=x.elements.message.value.trim();if(!o||!s){alert("Please fill in all fields");return}console.log("Form data:",{name:o,email:s,message:c||""}),alert("Your message has been sent!"),H(),w(),x.reset()});function oe(){ee.overflow="hidden",te.overflow="hidden"}function w(){ee.overflow="auto",te.overflow="auto"}function H(){y.classList.add("hidden"),w()}const Le=document.querySelector(".mobile-menu"),we=document.querySelector(".btn-burger"),Ee=document.querySelector(".close-btn"),Se=Array.from(document.querySelectorAll(".mobile-nav-link")),W=()=>Le.classList.toggle("is-open");we.addEventListener("click",()=>{oe(),W()});Ee.addEventListener("click",()=>{w(),W()});Se.forEach(e=>{e.addEventListener("click",()=>{w(),W()})});const q=document.querySelectorAll(".slide"),k=document.querySelector(".hero-swiper-btn-prev"),L=document.querySelector(".hero-swiper-btn-next");let f=0;function U(e){console.log("Показываем слайд:",e),q.forEach((o,s)=>{o.classList.remove("active"),o.setAttribute("aria-hidden","true"),s===e&&(o.classList.add("active"),o.setAttribute("aria-hidden","false"),console.log("Активирован слайд:",s,o.className))})}function _(){!k||!L||(k.disabled=f===0,k.classList.toggle("arrow--disabled",f===0),L.disabled=f===q.length-1,L.classList.toggle("arrow--disabled",f===q.length-1))}function Q(e){e.disabled||(e.classList.add("is-active"),e.blur(),setTimeout(()=>{e.classList.remove("is-active")},100))}q.length>0&&k&&L&&(U(f),_(),k.addEventListener("click",()=>{f>0&&(f=f-1,U(f),_(),Q(k))}),L.addEventListener("click",()=>{f<q.length-1&&(f=f+1,U(f),_(),Q(L))}));N.defaults.baseURL="https://books-backend.p.goit.global";const Ae=document.querySelector(".books-list"),xe=document.querySelector(".books-show-counter"),j=document.querySelector("#categories-container"),K=document.querySelector("#page-next"),Ce=10,Me=24,qe=4;let V=0,M=[],z=[],Z=F();async function Be(){try{const e=await N.get("/books/category-list");return console.log(e.data),e.data}catch(e){console.log(e.message)}}async function $e(){try{const e=await N.get("/books/top-books");return console.log(e.data),e.data}catch(e){console.log(e.message)}}async function Te(e){try{const o=await N.get(`/books/category/?category=${encodeURIComponent(e)}`);return console.log(o.data),o.data}catch(o){console.log(o.response.data.message||o.message)}}function F(){const e=window.innerWidth;return e<768?"mobile":e>=768&&e<1440?"tablet":"desktop"}function Pe(e){const o='<option value="" disabled selected>Categories</option>',s='<option value="All categories">All categories</option>',c=e.map(({list_name:r})=>r!==""?`<option value="${r}">${r}</option>`:"").join("");j.innerHTML=`<select class ="books-categories-select" name="categories" id="categories-select">${o+s+c}</select>`}function Ie(e){const s=[{list_name:"All categories"},...e].map(({list_name:c})=>c!==""?`<li class="categories-item" ><a class="category-link" data-category-name="${c}">${c}</a></li>`:"").join("");j.innerHTML=`<ul class="categories-list">${s}</ul>`}function Oe(e){Ae.innerHTML=e.map(({_id:o,book_image:s,title:c,author:r,price:i})=>`
        <li class="books-item" data-id=${o}>
          <img class="books-image" src="${s}" alt="${c}" />
          <div class="books-list-group">
          <div class="books-list-section"><h4 class="books-list-title">${c}</h4>
          <p class="books-list-author">${r}</p>
          </div>
          <p class="books-list-price">$${i}</p>
          </div>
          <button class="learn-more-btn" data-id=${o} type="button">Learn More</button>
        </li>
      `).join("")}function De(){R(),ne()}function Ne(){const e=F();e!==Z&&(Z=e,De())}function He(e,o){xe.innerHTML=`Showing ${e} of ${o}`}async function je(){try{z=await Be(),ne()}catch(e){console.log(e.message)}}function ne(){F()==="desktop"?Ie(z):Pe(z)}async function Ve(e){try{M=await Te(e),V=0,R()}catch{}}async function se(){try{M=(await $e()).flatMap(o=>o.list_name!==""?o.books:[]),V=0,R()}catch{}}function R(){const e=F()==="mobile"?Ce:Me,o=M.slice(0,e+V*qe);He(o.length,M.length),Oe(o),_e(o.length,M.length)}async function re(e){e==="All categories"?se():Ve(e)}async function Fe(e){e.target.id==="categories-select"&&re(e.target.value)}function Re(e){if(e.target.classList.contains("category-link")){const o=e.target.dataset.categoryName;re(o)}}function Ue(){V++,R()}function _e(e,o){e<o?K.classList.remove("visually-hidden"):K.classList.add("visually-hidden")}function Ke(){je(),se()}Ke();j.addEventListener("change",Fe);K.addEventListener("click",Ue);j.addEventListener("click",Re);window.addEventListener("resize",Ne);const C=new me(".feedbacks-slider",{modules:[ge,ye,be,ve],slidesPerView:1,spaceBetween:24,loop:!1,navigation:{nextEl:".feedbacks-swiper-btn-next",prevEl:".feedbacks-swiper-btn-prev",disabledClass:"arrow--disabled"},pagination:{el:".feedbacks-swiper-pagination",clickable:!0},keyboard:{enabled:!0,onlyInViewport:!0},a11y:{enabled:!0,prevSlideMessage:"Попередній відгук",nextSlideMessage:"Наступний відгук"},breakpoints:{768:{slidesPerView:2},1440:{slidesPerView:3}}});function ie(){const e=document.querySelector(".feedbacks-swiper-btn-prev"),o=document.querySelector(".feedbacks-swiper-btn-next");e.disabled=C.isBeginning,o.disabled=C.isEnd,e.classList.toggle("arrow--disabled",C.isBeginning),o.classList.toggle("arrow--disabled",C.isEnd)}ie();C.on("slideChange",ie);(()=>{const e="https://books-backend.p.goit.global",o=t=>document.querySelector(t),s=(t="")=>String(t).replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&#039;");function c(t,n=1400){const a=document.createElement("div");a.className="toast",a.textContent=t,Object.assign(a.style,{position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:"18px",background:"#222",color:"#fff",padding:"8px 12px",borderRadius:"8px",zIndex:12e3}),document.body.appendChild(a),setTimeout(()=>a.remove(),n)}async function r(t){const n=await fetch(t,{cache:"no-store"});if(!n.ok){const a=await n.text().catch(()=>null);throw new Error(a||`${n.status} ${n.statusText}`)}return n.json()}const i=o("#modal-backdrop"),p=o("#modal"),B=o("#modal-close"),E=o("#modal-cover"),$=o("#modal-title"),T=o("#modal-author"),P=o("#modal-price"),d=o("#quantity"),J=o("#increase"),X=o("#decrease"),Y=o("#add-to-cart"),G=o("#modal-form"),S=document.querySelector(".accordion-container");let b=null,I=null,v=[],O=null;document.body.addEventListener("click",t=>{const n=t.target.closest(".learn-more, .learn-more-btn");if(!n)return;const a=n.dataset.bookId||n.dataset.id||n.getAttribute("data-book-id")||n.getAttribute("data-id");if(!a){alert("ID книги не задано (data-book-id або data-id).");return}ae(a)});async function ae(t){if(!i||!p){console.warn("Modal DOM elements not found.");return}I=document.activeElement,i.classList.remove("hidden"),i.setAttribute("aria-hidden","false"),document.documentElement.style.overflow="hidden",document.body.style.overflow="hidden",$&&($.textContent="Завантаження..."),T&&(T.textContent=""),P&&(P.textContent=""),E&&(E.src="/assets/fallback.jpg"),S&&S.querySelectorAll(".ac-panel").forEach(a=>a.innerHTML="");try{const n=await r(`${e}/books/${encodeURIComponent(t)}`);b=n,ce(n),pe(),ue()}catch(n){console.error("Error fetching book:",n),alert("Не вдалося завантажити інформацію про книгу."),h()}}function ce(t){const n=t.title||t.name||t.bookTitle||"",a=t.authors||t.author||(Array.isArray(t.authorsList)?t.authorsList.join(", "):""),m=t.price!==void 0&&t.price!==null?t.price:t.list_price||t.priceText||"",A=t.image||t.cover||(Array.isArray(t.images)?t.images[0]:t.imageUrl)||"/assets/fallback.jpg";E&&(E.src=A,E.alt=n||"book cover"),$&&($.textContent=n||"Без назви"),T&&(T.textContent=a||""),P&&(P.textContent=typeof m=="number"?`$${m}`:m||""),d&&(d.value=1);const u=t.details||t.description||t.summary||t.about||"",l=t.shipping||t.shipping_info||t.delivery||"",g=t.returns||t.returnPolicy||t.refundPolicy||"";if(S){const D=S.querySelectorAll(".ac-panel");D.length>=3?(D[0].innerHTML=`<p class="ac-text">${s(u)}</p>`,D[1].innerHTML=`<p class="ac-text">${s(l)}</p>`,D[2].innerHTML=`<p class="ac-text">${s(g)}</p>`):S.innerHTML=`
          <div class="ac"><div class="ac-panel"><p class="ac-text">${s(u)}</p></div></div>
          <div class="ac"><div class="ac-panel"><p class="ac-text">${s(l)}</p></div></div>
          <div class="ac"><div class="ac-panel"><p class="ac-text">${s(g)}</p></div></div>
        `,de()}}function h(){fe(),i&&(i.classList.add("hidden"),i.setAttribute("aria-hidden","true")),document.documentElement.style.overflow="",document.body.style.overflow="",b=null;try{I&&typeof I.focus=="function"&&I.focus()}catch{}}i&&i.addEventListener("click",t=>{t.target===i&&h()}),B&&B.addEventListener("click",h),document.addEventListener("keydown",t=>{t.key==="Escape"&&i&&!i.classList.contains("hidden")&&h(),t.key==="Tab"&&O&&O(t)}),J&&J.addEventListener("click",()=>{d&&(d.value=Math.max(1,Number(d.value||1)+1))}),X&&X.addEventListener("click",()=>{d&&(d.value=Math.max(1,Number(d.value||1)-1))}),d&&d.addEventListener("input",()=>{const t=Number(d.value||0);(!Number.isFinite(t)||t<1)&&(d.value=1)}),Y&&Y.addEventListener("click",async()=>{const t=d?Math.max(1,Number(d.value||1)):1,n=le();console.log("Додано до кошика ",t,{action:"add_to_cart",bookId:n,quantity:t}),c("Додано до кошика")}),G&&G.addEventListener("submit",t=>{t.preventDefault(),d&&Math.max(1,Number(d.value||1)),alert("Дякуємо за покупку"),h()});function le(){return b&&(b._id||b.id||b.bookId)||null}function de(){const t=document.querySelector(".accordion-container");if(!t)return;const n=["Details","Shipping","Returns"];Array.from(t.querySelectorAll(".ac")).forEach((m,A)=>{const u=m.querySelector(".ac-panel");let l=m.querySelector(".ac-header");l||(l=document.createElement("button"),l.type="button",l.className="ac-header",l.setAttribute("aria-expanded","false"),l.setAttribute("aria-controls",`ac-panel-${A}`),l.innerHTML=`<span class="ac-title">${n[A]||"Info"}</span><span class="ac-chevron">▾</span>`,u?m.insertBefore(l,u):m.appendChild(l)),u&&!u.id&&(u.id=`ac-panel-${A}`),u&&(u.style.display="none"),l.onclick=()=>{l.getAttribute("aria-expanded")==="true"?(l.setAttribute("aria-expanded","false"),l.querySelector(".ac-chevron").textContent="▾",u&&(u.style.display="none")):(l.setAttribute("aria-expanded","true"),l.querySelector(".ac-chevron").textContent="▴",u&&(u.style.display="block"))},l.addEventListener("keydown",g=>{(g.key==="Enter"||g.key===" ")&&(g.preventDefault(),l.click())})})}function ue(){if(!p||(v=Array.from(p.querySelectorAll('a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])')).filter(a=>a.offsetParent!==null),v.length===0))return;const t=v[0],n=v[v.length-1];O=function(a){a.key==="Tab"&&(a.shiftKey?document.activeElement===t&&(a.preventDefault(),n.focus()):document.activeElement===n&&(a.preventDefault(),t.focus()))};try{(B||t).focus()}catch{}}function fe(){O=null,v=[]}function pe(){try{(B||p).focus()}catch{}}window._closeBookModal=h})();
//# sourceMappingURL=index.js.map
