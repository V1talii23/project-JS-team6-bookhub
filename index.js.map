{"version":3,"file":"index.js","sources":["../src/js/animation.js","../src/js/contact-modal.js","../src/js/header.js","../src/js/hero.js","../src/js/books.js","../src/js/feedbacks.js","../src/js/events.js","../src/js/modal-window-books.js"],"sourcesContent":["// Функція для анімації появи блоків .section\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const delayTimeMs = 200;\n  // Створюємо екземпляр IntersectionObserver який визначатиме чи видно дану секцію\n  const observer = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry, index) => {\n        if (entry.isIntersecting) {\n          // Додаємо затримку показу для кожного блоку аби вони зʼявлялись один за одним\n          setTimeout(() => entry.target.classList.add(\"visible\"), index * delayTimeMs);\n\n          observer.unobserve(entry.target);\n        }\n      });\n    },\n    { threshold: 0.2 }\n  );\n  // Додаємо усі секції до екземпляра IntersectionObserver створеного вище\n  document.querySelectorAll(\".section\").forEach((section) => observer.observe(section));\n});","const modal = document.querySelector('.contact-modal');\nconst openBtns = document.querySelectorAll('.open-modal');\nconst closeBtn = modal.querySelector('.close-modal');\nconst scrollBody = document.body.style;\nconst scrollHtml = document.documentElement.style;\nopenBtns.forEach(btn => {\n  btn.addEventListener('click', () => {\n    const category = btn.closest('.category')?.dataset.category || 'Default';\n    const categoryTitle = modal.querySelector('.title');\n    categoryTitle.textContent = category;\n\n    modal.classList.remove('hidden');\n    removeScroll();\n  });\n});\n\ncloseBtn.addEventListener('click', () => {\n  closeModal();\n  addScroll();\n});\n\nmodal.addEventListener('click', e => {\n  if (!e.target.closest('.register-contact-modal')) {\n    closeModal();\n  }\n});\n\ndocument.addEventListener('keydown', e => {\n  if (e.key === 'Escape' && !modal.classList.contains('hidden')) {\n    closeModal();\n    addScroll();\n  }\n});\n\nconst form = modal.querySelector('form');\nform.addEventListener('submit', e => {\n  e.preventDefault();\n\n  const name = form.elements.name.value.trim();\n  const email = form.elements.email.value.trim();\n  const message = form.elements.message.value.trim();\n\n  if (!name || !email) {\n    alert('Please fill in all fields');\n    return;\n  }\n  console.log('Form data:', { name, email, message: message || '' });\n\n  alert('Your message has been sent!');\n\n  closeModal();\n  addScroll();\n  form.reset();\n});\n\nfunction removeScroll() {\n  scrollBody.overflow = 'hidden';\n  scrollHtml.overflow = 'hidden';\n}\n\nfunction addScroll() {\n  scrollBody.overflow = 'auto';\n  scrollHtml.overflow = 'auto';\n}\n\nfunction closeModal() {\n  modal.classList.add('hidden');\n  addScroll();\n}\n\nexport { removeScroll, addScroll };\n","import { addScroll, removeScroll } from './contact-modal';\nconst modalWindow = document.querySelector('.mobile-menu');\nconst openModalBtn = document.querySelector('.btn-burger');\nconst closeModalBtn = document.querySelector('.close-header-btn');\nconst navLinks = Array.from(document.querySelectorAll('.mobile-nav-link'));\n\nconst toggleModal = () => modalWindow.classList.toggle('is-open');\n\nopenModalBtn.addEventListener('click', () => {\n  removeScroll();\n  toggleModal();\n});\n\ncloseModalBtn.addEventListener('click', () => {\n  addScroll();\n  toggleModal();\n});\n\nnavLinks.forEach(link => {\n  link.addEventListener('click', () => {\n    addScroll();\n    toggleModal();\n  });\n});\n","const slides = document.querySelectorAll('.slide');\nconst prevBtn = document.querySelector('.hero-swiper-btn-prev');\nconst nextBtn = document.querySelector('.hero-swiper-btn-next');\n\nlet current = 0;\n\nfunction showSlide(index) {\n  console.log('Показываем слайд:', index);\n  slides.forEach((slide, i) => {\n    slide.classList.remove('active');\n    slide.setAttribute('aria-hidden', 'true');\n    if (i === index) {\n      slide.classList.add('active');\n      slide.setAttribute('aria-hidden', 'false');\n      console.log('Активирован слайд:', i, slide.className);\n    }\n  });\n}\n\nfunction updateButtons() {\n  if (!prevBtn || !nextBtn) return;\n\n  prevBtn.disabled = current === 0;\n  prevBtn.classList.toggle('arrow--disabled', current === 0);\n\n  nextBtn.disabled = current === slides.length - 1;\n  nextBtn.classList.toggle('arrow--disabled', current === slides.length - 1);\n}\n\nfunction flashButton(button) {\n  if (button.disabled) return; \n  button.classList.add('is-active');\n  button.blur();\n  setTimeout(() => {\n    button.classList.remove('is-active');\n  }, 100);\n}\n\nif (slides.length > 0 && prevBtn && nextBtn) {\n  showSlide(current);\n  updateButtons();\n\n  prevBtn.addEventListener('click', () => {\n    if (current > 0) {\n      current = current - 1;\n      showSlide(current);\n      updateButtons();\n      flashButton(prevBtn);\n    }\n  });\n\n  nextBtn.addEventListener('click', () => {\n    if (current < slides.length - 1) {\n      current = current + 1;\n      showSlide(current);\n      updateButtons();\n      flashButton(nextBtn);\n    }\n  });\n}","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global';\n\nconst booksListContainer = document.querySelector('.books-list');\nconst booksShowCounter = document.querySelector('.books-show-counter');\nconst categoriesContainer = document.querySelector('#categories-container');\nconst showMoreBtn = document.querySelector('#page-next');\nconst mobileBooksLimit = 10;\nconst desktopBooksLimit = 24;\nconst booksPerPage = 4;\n\nlet page = 0;\nlet books = [];\nlet categories = [];\nlet currentDevice = getDeviceType();\n\nasync function getBooksCategoryList() {\n  try {\n    const response = await axios.get('/books/category-list');\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nasync function getTopBooks() {\n  try {\n    const response = await axios.get('/books/top-books');\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nasync function getBooksByCategory(category) {\n  try {\n    const response = await axios.get(\n      `/books/category/?category=${encodeURIComponent(category)}`\n    );\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error.response.data.message || error.message);\n  }\n}\n\n// Test id: '65fc3c9da957e5c1ae05b741'\nasync function getBooksById(id) {\n  try {\n    const response = await axios.get(`/books/${id}`);\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction getDeviceType() {\n  const width = window.innerWidth;\n\n  if (width < 768) {\n    return 'mobile';\n  } else if (width >= 768 && width < 1440) {\n    return 'tablet';\n  } else {\n    return 'desktop';\n  }\n}\n\nfunction renderSelectCategoriesMarkup(arr) {\n  const defaultOption = `<option value=\"\" disabled selected>Categories</option>`;\n  const allOption = `<option value=\"All categories\">All categories</option>`;\n  const markup = arr\n    .map(({ list_name }) => {\n      if (list_name !== '') {\n        return `<option value=\"${list_name}\">${list_name}</option>`;\n      } else {\n        return '';\n      }\n    })\n    .join('');\n  categoriesContainer.innerHTML = `<select class =\"books-categories-select\" name=\"categories\" id=\"categories-select\">${\n    defaultOption + allOption + markup\n  }</select>`;\n}\n\nfunction renderListCategoriesMarkup(arr) {\n  const allArr = [{ list_name: 'All categories' }, ...arr];\n  const markup = allArr\n    .map(({ list_name }) => {\n      if (list_name !== '') {\n        return `<li class=\"categories-item\" ><a class=\"category-link\" data-category-name=\"${list_name}\">${list_name}</a></li>`;\n      } else {\n        return '';\n      }\n    })\n    .join('');\n  categoriesContainer.innerHTML = `<ul class=\"categories-list\">${markup}</ul>`;\n}\n\nfunction renderBooksListMarkup(books) {\n  booksListContainer.innerHTML = books\n    .map(\n      ({ _id, book_image, title, author, price }) => `\n        <li class=\"books-item\" data-id=${_id}>\n          <img class=\"books-image\" src=\"${book_image}\" alt=\"${title}\" />\n          <div class=\"books-list-group\">\n          <div class=\"books-list-section\"><h4 class=\"books-list-title\">${title}</h4>\n          <p class=\"books-list-author\">${author}</p>\n          </div>\n          <p class=\"books-list-price\">$${price}</p>\n          </div>\n          <button class=\"learn-more-btn\" data-id=${_id} type=\"button\">Learn More</button>\n        </li>\n      `\n    )\n    .join('');\n}\n\nfunction renderView() {\n  displayBookPage();\n  displayCategoriesByDevice();\n}\n\nfunction reRenderView() {\n  const newDevice = getDeviceType();\n  if (newDevice !== currentDevice) {\n    currentDevice = newDevice;\n    renderView(currentDevice);\n  }\n}\n\nfunction renderShowCounter(current, total) {\n  booksShowCounter.innerHTML = `Showing ${current} of ${total}`;\n}\n\nasync function displayCategories() {\n  try {\n    categories = await getBooksCategoryList();\n    displayCategoriesByDevice();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction displayCategoriesByDevice() {\n  getDeviceType() === 'desktop'\n    ? renderListCategoriesMarkup(categories)\n    : renderSelectCategoriesMarkup(categories);\n}\n\nasync function displayBooksByCategory(category) {\n  try {\n    books = await getBooksByCategory(category);\n    page = 0;\n    displayBookPage();\n  } catch (error) {}\n}\n\nasync function displayTopBooks() {\n  try {\n    const response = await getTopBooks();\n    books = response.flatMap(element => {\n      if (element.list_name !== '') {\n        return element.books;\n      } else {\n        return [];\n      }\n    });\n    page = 0;\n\n    displayBookPage();\n  } catch (error) {}\n}\n\nfunction displayBookPage() {\n  const startCount =\n    getDeviceType() === 'mobile' ? mobileBooksLimit : desktopBooksLimit;\n  const booksOnPage = books.slice(0, startCount + page * booksPerPage);\n  renderShowCounter(booksOnPage.length, books.length);\n  renderBooksListMarkup(booksOnPage);\n  updateButtonView(booksOnPage.length, books.length);\n}\n\nasync function handleCategory(category) {\n  if (category === 'All categories') {\n    displayTopBooks();\n  } else {\n    displayBooksByCategory(category);\n  }\n}\n\nasync function handleCategoryChange(event) {\n  if (event.target.id === 'categories-select') {\n    handleCategory(event.target.value);\n  }\n}\n\nfunction handleCategoryClick(event) {\n  if (event.target.classList.contains('category-link')) {\n    const category = event.target.dataset.categoryName;\n    handleCategory(category);\n  }\n}\n\nfunction handleShowMore() {\n  page++;\n  displayBookPage();\n}\n\nfunction updateButtonView(current, total) {\n  if (current < total) {\n    showMoreBtn.classList.remove('visually-hidden');\n  } else {\n    showMoreBtn.classList.add('visually-hidden');\n  }\n}\n\nfunction loadPage() {\n  displayCategories();\n  displayTopBooks();\n}\n\nloadPage();\n\ncategoriesContainer.addEventListener('change', handleCategoryChange);\nshowMoreBtn.addEventListener('click', handleShowMore);\ncategoriesContainer.addEventListener('click', handleCategoryClick);\nwindow.addEventListener('resize', reRenderView);\n","import Swiper from 'swiper';\nimport { Navigation, Pagination, Keyboard, A11y } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nconst feedbacksSwiper = new Swiper('.feedbacks-slider', {\n  modules: [Navigation, Pagination, Keyboard, A11y],\n\n  slidesPerView: 1,\n  spaceBetween: 24,\n  loop: false,\n\n  navigation: {\n    nextEl: '.feedbacks-swiper-btn-next',\n    prevEl: '.feedbacks-swiper-btn-prev',\n    disabledClass: 'arrow--disabled',\n  },\n\n  pagination: {\n    el: '.feedbacks-swiper-pagination',\n    clickable: true,\n  },\n\n  keyboard: {\n    enabled: true,\n    onlyInViewport: true,\n  },\n\n  a11y: {\n    enabled: true,\n    prevSlideMessage: 'Попередній відгук',\n    nextSlideMessage: 'Наступний відгук',\n  },\n\n  breakpoints: {\n    768: { slidesPerView: 2 },\n    1440: { slidesPerView: 3 },\n  },\n});\n\nfunction updateButtons() {\n  const prevBtn = document.querySelector('.feedbacks-swiper-btn-prev');\n  const nextBtn = document.querySelector('.feedbacks-swiper-btn-next');\n\n  prevBtn.disabled = feedbacksSwiper.isBeginning;\n  nextBtn.disabled = feedbacksSwiper.isEnd;\n\n  prevBtn.classList.toggle('arrow--disabled', feedbacksSwiper.isBeginning);\n  nextBtn.classList.toggle('arrow--disabled', feedbacksSwiper.isEnd);\n}\n\nupdateButtons();\n\nfeedbacksSwiper.on('slideChange', updateButtons);\n","import Swiper from 'swiper';\nimport { Navigation, Pagination, Keyboard, A11y } from 'swiper/modules';\nimport 'swiper/css';\nimport 'swiper/css/navigation';\nimport 'swiper/css/pagination';\n\nconst eventsSwiper = new Swiper('.events-swiper', {\n  modules: [Navigation, Pagination, Keyboard, A11y],\n\n  slidesPerView: 1,\n  spaceBetween: 16,\n  loop: false,\n\n  navigation: {\n    nextEl: '.events-swiper-btn-next',\n    prevEl: '.events-swiper-btn-prev',\n    disabledClass: 'arrow--disabled',\n  },\n\n  pagination: {\n    el: '.events-swiper-pagination',\n    clickable: true,\n  },\n\n  keyboard: {\n    enabled: true,\n    onlyInViewport: true,\n  },\n\n  a11y: {\n    enabled: true,\n    prevSlideMessage: 'Попередні події',\n    nextSlideMessage: 'Наступні події',\n  },\n\n  breakpoints: {\n    768: { slidesPerView: 2 },\n    1440: { slidesPerView: 3 },\n  },\n});\n\n\nfunction updateButtons() {\n  const prevBtn = document.querySelector('.events-swiper-btn-prev');\n  const nextBtn = document.querySelector('.events-swiper-btn-next');\n\n  if (!prevBtn || !nextBtn) return;\n\n  prevBtn.disabled = eventsSwiper.isBeginning;\n  nextBtn.disabled = eventsSwiper.isEnd;\n\n  prevBtn.classList.toggle('arrow--disabled', eventsSwiper.isBeginning);\n  nextBtn.classList.toggle('arrow--disabled', eventsSwiper.isEnd);\n}\n\n\neventsSwiper.on('init', updateButtons);\n\neventsSwiper.on('slideChange', updateButtons);\n\n\nupdateButtons();\n","import { removeScroll, addScroll } from './contact-modal';\n\n(() => {\n  const API_BASE = 'https://books-backend.p.goit.global';\n\n  // --- helpers ---\n  const $ = s => document.querySelector(s);\n  const $$ = s => Array.from(document.querySelectorAll(s));\n  const escapeHtml = (s = '') =>\n    String(s)\n      .replaceAll('&', '&amp;')\n      .replaceAll('<', '&lt;')\n      .replaceAll('>', '&gt;')\n      .replaceAll('\"', '&quot;')\n      .replaceAll(\"'\", '&#039;');\n\n  function showToast(msg, ms = 1400) {\n    const t = document.createElement('div');\n    t.className = 'toast';\n    t.textContent = msg;\n    Object.assign(t.style, {\n      position: 'fixed',\n      left: '50%',\n      transform: 'translateX(-50%)',\n      bottom: '18px',\n      background: '#222',\n      color: '#fff',\n      padding: '8px 12px',\n      borderRadius: '8px',\n      zIndex: 12000,\n    });\n    document.body.appendChild(t);\n    setTimeout(() => t.remove(), ms);\n  }\n\n  async function fetchJson(url) {\n    const res = await fetch(url, { cache: 'no-store' });\n    if (!res.ok) {\n      const txt = await res.text().catch(() => null);\n      throw new Error(txt || `${res.status} ${res.statusText}`);\n    }\n    return res.json();\n  }\n\n  // --- DOM refs (based on your HTML) ---\n  const backdrop = $('#modal-backdrop');\n  const modal = $('#modal');\n  const modalClose = $('#modal-close');\n  const cover = $('#modal-cover');\n  const titleEl = $('#modal-title');\n  const authorEl = $('#modal-author');\n  const priceEl = $('#modal-price');\n  const qtyInput = $('#quantity');\n  const btnInc = $('#increase');\n  const btnDec = $('#decrease');\n  const btnAddToCart = $('#add-to-cart');\n  const form = $('#modal-form');\n  const accordionContainer = document.querySelector('.accordion-container');\n\n  // state\n  let currentBook = null;\n  let lastActive = null;\n  let focusable = [];\n  let focusTrapHandler = null;\n\n  // ensure backdrop initially hidden\n  if (backdrop) {\n    backdrop.classList.add('hidden');\n    backdrop.setAttribute('aria-hidden', 'true');\n  }\n\n  // --- delegation for Learn More buttons (supports both .learn-more and .learn-more-btn) ---\n  document.body.addEventListener('click', e => {\n    const btn = e.target.closest('.learn-more, .learn-more-btn');\n    if (!btn) return;\n    const id =\n      btn.dataset.bookId ||\n      btn.dataset.id ||\n      btn.getAttribute('data-book-id') ||\n      btn.getAttribute('data-id');\n    if (!id) {\n      alert('ID книги не задано (data-book-id або data-id).');\n      return;\n    }\n    openModal(id);\n  });\n\n  // --- open modal ---\n  async function openModal(bookId) {\n    if (!backdrop || !modal) {\n      console.warn('Modal DOM elements not found.');\n      return;\n    }\n\n    lastActive = document.activeElement;\n\n    // show backdrop, block scroll\n    backdrop.classList.remove('hidden');\n    backdrop.setAttribute('aria-hidden', 'false');\n    removeScroll();\n\n    // loading placeholders\n    if (titleEl) titleEl.textContent = 'Завантаження...';\n    if (authorEl) authorEl.textContent = '';\n    if (priceEl) priceEl.textContent = '';\n    if (cover) cover.src = '/assets/fallback.jpg';\n    // clear panels\n    if (accordionContainer) {\n      const panels = Array.from(\n        accordionContainer.querySelectorAll('.ac-panel')\n      );\n      panels.forEach(p => (p.innerHTML = ''));\n    }\n\n    try {\n      const data = await fetchJson(\n        `${API_BASE}/books/${encodeURIComponent(bookId)}`\n      );\n      currentBook = data;\n      populateModal(data);\n      setInitialFocus();\n      enableFocusTrap();\n    } catch (err) {\n      console.error('Error fetching book:', err);\n      alert('Не вдалося завантажити інформацію про книгу.');\n      closeModal();\n    }\n  }\n\n  // --- populate modal with book data ---\n  function populateModal(data) {\n    const title = data.title || data.name || data.bookTitle || '';\n    const authors =\n      data.authors ||\n      data.author ||\n      (Array.isArray(data.authorsList) ? data.authorsList.join(', ') : '');\n    const price =\n      data.price !== undefined && data.price !== null\n        ? data.price\n        : data.list_price || data.priceText || '';\n    const img =\n      data.image ||\n      data.cover ||\n      (Array.isArray(data.images) ? data.images[0] : data.imageUrl) ||\n      '/assets/fallback.jpg';\n\n    if (cover) {\n      cover.src = img;\n      cover.alt = title || 'book cover';\n    }\n    if (titleEl) titleEl.textContent = title || 'Без назви';\n    if (authorEl) authorEl.textContent = authors || '';\n    if (priceEl)\n      priceEl.textContent =\n        typeof price === 'number' ? `$${price}` : price || '';\n\n    if (qtyInput) qtyInput.value = 1;\n\n    // fill accordion panels (Details / Shipping / Returns)\n    const details =\n      data.details || data.description || data.summary || data.about || '';\n    const shipping = data.shipping || data.shipping_info || data.delivery || '';\n    const returns =\n      data.returns || data.returnPolicy || data.refundPolicy || '';\n\n    if (accordionContainer) {\n      const panels = accordionContainer.querySelectorAll('.ac-panel');\n      if (panels.length >= 3) {\n        panels[0].innerHTML = `<p class=\"ac-text\">${escapeHtml(details)}</p>`;\n        panels[1].innerHTML = `<p class=\"ac-text\">${escapeHtml(shipping)}</p>`;\n        panels[2].innerHTML = `<p class=\"ac-text\">${escapeHtml(returns)}</p>`;\n      } else {\n        // fallback: recreate container with three panels\n        accordionContainer.innerHTML = `\n          <div class=\"ac\"><div class=\"ac-panel\"><p class=\"ac-text\">${escapeHtml(\n            details\n          )}</p></div></div>\n          <div class=\"ac\"><div class=\"ac-panel\"><p class=\"ac-text\">${escapeHtml(\n            shipping\n          )}</p></div></div>\n          <div class=\"ac\"><div class=\"ac-panel\"><p class=\"ac-text\">${escapeHtml(\n            returns\n          )}</p></div></div>\n        `;\n      }\n      // init accordion UI (multiple open allowed, panels closed by default)\n      initAccordionUI_MultiOpen();\n    }\n  }\n\n  // --- close modal ---\n  function closeModal() {\n    // release focus trap, restore scrolling, hide backdrop\n    releaseFocusTrap();\n    if (backdrop) {\n      backdrop.classList.add('hidden');\n      backdrop.setAttribute('aria-hidden', 'true');\n    }\n    document.documentElement.style.overflow = '';\n    document.body.style.overflow = '';\n    currentBook = null;\n    // restore focus\n    try {\n      if (lastActive && typeof lastActive.focus === 'function')\n        lastActive.focus();\n    } catch (e) {}\n  }\n\n  // backdrop click closes only when clicking backdrop itself\n  if (backdrop) {\n    backdrop.addEventListener('click', e => {\n      if (e.target === backdrop) closeModal();\n    });\n  }\n  if (modalClose) modalClose.addEventListener('click', closeModal);\n\n  // escape key closes\n  document.addEventListener('keydown', e => {\n    if (\n      e.key === 'Escape' &&\n      backdrop &&\n      !backdrop.classList.contains('hidden')\n    ) {\n      closeModal();\n    }\n    if (e.key === 'Tab' && focusTrapHandler) {\n      focusTrapHandler(e);\n    }\n  });\n\n  // --- quantity controls ---\n  if (btnInc)\n    btnInc.addEventListener('click', () => {\n      if (!qtyInput) return;\n      qtyInput.value = Math.max(1, Number(qtyInput.value || 1) + 1);\n    });\n  if (btnDec)\n    btnDec.addEventListener('click', () => {\n      if (!qtyInput) return;\n      qtyInput.value = Math.max(1, Number(qtyInput.value || 1) - 1);\n    });\n  if (qtyInput) {\n    qtyInput.addEventListener('input', () => {\n      const v = Number(qtyInput.value || 0);\n      if (!Number.isFinite(v) || v < 1) qtyInput.value = 1;\n    });\n  }\n\n  // --- Add To Cart: console.log + toast ---\n  if (btnAddToCart) {\n    btnAddToCart.addEventListener('click', async () => {\n      const qty = qtyInput ? Math.max(1, Number(qtyInput.value || 1)) : 1;\n      const id = getCurrentBookId();\n      console.log('Додано до кошика ', qty, {\n        action: 'add_to_cart',\n        bookId: id,\n        quantity: qty,\n      });\n      showToast('Додано до кошика');\n    });\n  }\n\n  // --- Buy Now: submit form -> alert & close ---\n  if (form) {\n    form.addEventListener('submit', e => {\n      e.preventDefault();\n      const qty = qtyInput ? Math.max(1, Number(qtyInput.value || 1)) : 1;\n      alert('Дякуємо за покупку');\n      closeModal();\n    });\n  }\n\n  function getCurrentBookId() {\n    if (!currentBook) return null;\n    return currentBook._id || currentBook.id || currentBook.bookId || null;\n  }\n\n  // --- Accordion implementation: MULTI-OPEN allowed, panels closed by default, NO animation ---\n  function initAccordionUI_MultiOpen() {\n    const container = document.querySelector('.accordion-container');\n    if (!container) return;\n\n    const titles = ['Details', 'Shipping', 'Returns'];\n    const nodes = Array.from(container.querySelectorAll('.ac'));\n\n    nodes.forEach((node, idx) => {\n      const panel = node.querySelector('.ac-panel');\n\n      // create header button if it doesn't exist\n      let header = node.querySelector('.ac-header');\n      if (!header) {\n        header = document.createElement('button');\n        header.type = 'button';\n        header.className = 'ac-header';\n        header.setAttribute('aria-expanded', 'false');\n        header.setAttribute('aria-controls', `ac-panel-${idx}`);\n        header.innerHTML = `<span class=\"ac-title\">${\n          titles[idx] || 'Info'\n        }</span><span class=\"ac-chevron\">▾</span>`;\n        if (panel) node.insertBefore(header, panel);\n        else node.appendChild(header);\n      }\n\n      // ensure panel id\n      if (panel && !panel.id) panel.id = `ac-panel-${idx}`;\n\n      // hide panel by default\n      if (panel) {\n        panel.style.display = 'none';\n      }\n\n      // attach toggle: allow multiple open, so toggle only this panel\n      header.onclick = () => {\n        const isOpen = header.getAttribute('aria-expanded') === 'true';\n        if (isOpen) {\n          // close\n          header.setAttribute('aria-expanded', 'false');\n          header.querySelector('.ac-chevron').textContent = '▾';\n          if (panel) panel.style.display = 'none';\n        } else {\n          // open (do not close others)\n          header.setAttribute('aria-expanded', 'true');\n          header.querySelector('.ac-chevron').textContent = '▴';\n          if (panel) panel.style.display = 'block';\n        }\n      };\n\n      // make header keyboard accessible (Enter/Space)\n      header.addEventListener('keydown', e => {\n        if (e.key === 'Enter' || e.key === ' ') {\n          e.preventDefault();\n          header.click();\n        }\n      });\n    });\n  }\n\n  // --- focus trap (basic) ---\n  function enableFocusTrap() {\n    if (!modal) return;\n    focusable = Array.from(\n      modal.querySelectorAll(\n        'a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex=\"-1\"])'\n      )\n    ).filter(el => el.offsetParent !== null);\n    if (focusable.length === 0) return;\n    const first = focusable[0];\n    const last = focusable[focusable.length - 1];\n    focusTrapHandler = function (e) {\n      if (e.key !== 'Tab') return;\n      if (e.shiftKey) {\n        if (document.activeElement === first) {\n          e.preventDefault();\n          last.focus();\n        }\n      } else {\n        if (document.activeElement === last) {\n          e.preventDefault();\n          first.focus();\n        }\n      }\n    };\n    try {\n      (modalClose || first).focus();\n    } catch (e) {}\n  }\n\n  function releaseFocusTrap() {\n    focusTrapHandler = null;\n    focusable = [];\n  }\n\n  function setInitialFocus() {\n    try {\n      (modalClose || modal).focus();\n    } catch (e) {}\n  }\n\n  // expose for debugging\n  window._closeBookModal = closeModal;\n})();\n"],"names":["observer","entries","entry","index","section","modal","openBtns","closeBtn","scrollBody","scrollHtml","btn","category","_a","categoryTitle","removeScroll","closeModal","addScroll","form","name","email","message","modalWindow","openModalBtn","closeModalBtn","navLinks","toggleModal","link","slides","prevBtn","nextBtn","current","showSlide","slide","i","updateButtons","flashButton","button","axios","booksListContainer","booksShowCounter","categoriesContainer","showMoreBtn","mobileBooksLimit","desktopBooksLimit","booksPerPage","page","books","categories","currentDevice","getDeviceType","getBooksCategoryList","response","error","getTopBooks","getBooksByCategory","width","renderSelectCategoriesMarkup","arr","defaultOption","allOption","markup","list_name","renderListCategoriesMarkup","renderBooksListMarkup","_id","book_image","title","author","price","renderView","displayBookPage","displayCategoriesByDevice","reRenderView","newDevice","renderShowCounter","total","displayCategories","displayBooksByCategory","displayTopBooks","element","startCount","booksOnPage","updateButtonView","handleCategory","handleCategoryChange","event","handleCategoryClick","handleShowMore","loadPage","feedbacksSwiper","Swiper","Navigation","Pagination","Keyboard","A11y","eventsSwiper","API_BASE","$","s","escapeHtml","showToast","msg","ms","t","fetchJson","url","res","txt","backdrop","modalClose","cover","titleEl","authorEl","priceEl","qtyInput","btnInc","btnDec","btnAddToCart","accordionContainer","currentBook","lastActive","focusable","focusTrapHandler","e","id","openModal","bookId","p","data","populateModal","setInitialFocus","enableFocusTrap","err","authors","img","details","shipping","returns","panels","initAccordionUI_MultiOpen","releaseFocusTrap","v","qty","getCurrentBookId","container","titles","node","idx","panel","header","el","first","last"],"mappings":"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"}