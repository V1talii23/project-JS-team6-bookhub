{"version":3,"file":"index.js","sources":["../src/js/header.js","../src/js/hero.js","../src/js/animation.js","../src/js/books.js","../src/js/feedbacks.js"],"sourcesContent":["const modalWindow = document.querySelector('.mobile-menu');\nconst openModalBtn = document.querySelector('.btn-burger');\nconst closeModalBtn = document.querySelector('.close-btn');\nconst navLinks = Array.from(document.querySelectorAll('.mobile-nav-link'));\nconst scroll = document.body.style;\n\nconst toggleModal = () => modalWindow.classList.toggle('is-open');\n\nopenModalBtn.addEventListener('click', () => {\n  scroll.overflow = 'hidden';\n  toggleModal();\n});\n\ncloseModalBtn.addEventListener('click', () => {\n  scroll.overflow = 'auto';\n  toggleModal();\n});\n\nnavLinks.forEach(link => {\n  link.addEventListener('click', () => {\n    scroll.overflow = 'auto';\n    toggleModal();\n  });\n});\n","\nconst slides = document.querySelectorAll('.slide');\nconst prevBtn = document.querySelector('.prev');\nconst nextBtn = document.querySelector('.next');\nlet current = 0;\n\n// Показує потрібний слайд\nfunction showSlide(index) {\n  slides.forEach((slide, i) => {\n    slide.classList.remove('active');\n    slide.setAttribute('aria-hidden', 'true');\n    if (i === index) {\n      slide.classList.add('active');\n      slide.setAttribute('aria-hidden', 'false');\n    }\n  });\n}\n\n// Підсвічує кнопку на мить (ефект \"active\")\nfunction flashButton(button) {\n  button.classList.add('is-active');\n\n  // Знімаємо фокус, щоб уникнути залипання стилів\n  button.blur();\n\n  // Прибираємо клас через 150 мс\n  setTimeout(() => {\n    button.classList.remove('is-active');\n  }, 350);\n}\n\n// Ініціалізація слайдера\nif (slides.length > 0) {\n  prevBtn.addEventListener('click', () => {\n    current = (current - 1 + slides.length) % slides.length;\n    showSlide(current);\n    flashButton(prevBtn);\n  });\n\n  nextBtn.addEventListener('click', () => {\n    current = (current + 1) % slides.length;\n    showSlide(current);\n    flashButton(nextBtn);\n  });\n\n  // Автоперемикання слайдів\n  setInterval(() => {\n    current = (current + 1) % slides.length;\n    showSlide(current);\n  }, 7000);\n}","// Функція для анімації появи блоків .section\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const delayTimeMs = 200;\n  // Створюємо екземпляр IntersectionObserver який визначатиме чи видно дану секцію\n  const observer = new IntersectionObserver(\n    (entries) => {\n      entries.forEach((entry, index) => {\n        if (entry.isIntersecting) {\n          // Додаємо затримку показу для кожного блоку аби вони зʼявлялись один за одним\n          setTimeout(() => entry.target.classList.add(\"visible\"), index * delayTimeMs);\n\n          observer.unobserve(entry.target);\n        }\n      });\n    },\n    { threshold: 0.2 }\n  );\n  // Додаємо усі секції до екземпляра IntersectionObserver створеного вище\n  document.querySelectorAll(\".section\").forEach((section) => observer.observe(section));\n});","import axios from 'axios';\n\naxios.defaults.baseURL = 'https://books-backend.p.goit.global';\n\nconst booksListContainer = document.querySelector('.books-list');\nconst booksShowCounter = document.querySelector('.books-show-counter');\nconst categoriesContainer = document.querySelector('#categories-container');\nconst showMoreBtn = document.querySelector('#page-next');\nconst mobileBooksLimit = 10;\nconst desktopBooksLimit = 24;\nconst booksPerPage = 4;\n\nlet page = 0;\nlet books = [];\nlet categories = [];\nlet currentDevice = getDeviceType();\n\nasync function getBooksCategoryList() {\n  try {\n    const response = await axios.get('/books/category-list');\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nasync function getTopBooks() {\n  try {\n    const response = await axios.get('/books/top-books');\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nasync function getBooksByCategory(category) {\n  try {\n    const response = await axios.get(\n      `/books/category/?category=${encodeURIComponent(category)}`\n    );\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error.response.data.message || error.message);\n  }\n}\n\n// Test id: '65fc3c9da957e5c1ae05b741'\nasync function getBooksById(id) {\n  try {\n    const response = await axios.get(`/books/${id}`);\n    console.log(response.data);\n    return response.data;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction getDeviceType() {\n  const width = window.innerWidth;\n\n  if (width < 768) {\n    return 'mobile';\n  } else if (width >= 768 && width < 1440) {\n    return 'tablet';\n  } else {\n    return 'desktop';\n  }\n}\n\nfunction renderSelectCategoriesMarkup(arr) {\n  const defaultOption = `<option value=\"\" disabled selected>Categories</option>`;\n  const allOption = `<option value=\"All categories\">All categories</option>`;\n  const markup = arr\n    .map(({ list_name }) => {\n      if (list_name !== '') {\n        return `<option value=\"${list_name}\">${list_name}</option>`;\n      } else {\n        return '';\n      }\n    })\n    .join('');\n  categoriesContainer.innerHTML = `<select name=\"categories\" id=\"categories-select\">${\n    defaultOption + allOption + markup\n  }</select>`;\n}\n\nfunction renderListCategoriesMarkup(arr) {\n  const markup = arr\n    .map(({ list_name }) => {\n      if (list_name !== '') {\n        return `<li class=\"categories-item\" ><a class=\"category-link\" data-category-name=\"${list_name}\">${list_name}</a></li>`;\n      } else {\n        return '';\n      }\n    })\n    .join('');\n  categoriesContainer.innerHTML = `<ul class=\"categories-list\">${markup}</ul>`;\n}\n\nfunction renderBooksListMarkup(books) {\n  booksListContainer.innerHTML = books\n    .map(\n      ({ _id, book_image, title, author, price }) => `\n        <li class=\"books-item\" data-id=${_id}>\n          <img class=\"books-image\" src=\"${book_image}\" alt=\"${title}\" />\n          <p class=\"books-title\">${title}</p>\n          <p class=\"books-author\">${author}</p>\n          <p class=\"books-price\">$${price}</p>\n          <button class=\"books-btn\" data-id=${_id} type=\"button\">Learn More</button>\n        </li>\n      `\n    )\n    .join('');\n}\n\nfunction renderView() {\n  displayBookPage();\n  displayCategoriesByDevice();\n}\n\nfunction reRenderView() {\n  const newDevice = getDeviceType();\n  if (newDevice !== currentDevice) {\n    currentDevice = newDevice;\n    renderView(currentDevice);\n  }\n}\n\nfunction renderShowCounter(current, total) {\n  booksShowCounter.innerHTML = `Showing ${current} of ${total}`;\n}\n\nasync function displayCategories() {\n  try {\n    categories = await getBooksCategoryList();\n    displayCategoriesByDevice();\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nfunction displayCategoriesByDevice() {\n  getDeviceType() === 'desktop'\n    ? renderListCategoriesMarkup(categories)\n    : renderSelectCategoriesMarkup(categories);\n}\n\nasync function displayBooksByCategory(category) {\n  try {\n    books = await getBooksByCategory(category);\n    page = 0;\n    displayBookPage();\n  } catch (error) {}\n}\n\nasync function displayTopBooks() {\n  try {\n    const response = await getTopBooks();\n    books = response.flatMap(element => {\n      if (element.list_name !== '') {\n        return element.books;\n      } else {\n        return [];\n      }\n    });\n    page = 0;\n\n    displayBookPage();\n  } catch (error) {}\n}\n\nfunction displayBookPage() {\n  const startCount =\n    getDeviceType() === 'mobile' ? mobileBooksLimit : desktopBooksLimit;\n  const booksOnPage = books.slice(0, startCount + page * booksPerPage);\n  renderShowCounter(booksOnPage.length, books.length);\n  renderBooksListMarkup(booksOnPage);\n  updateButtonView(booksOnPage.length, books.length);\n}\n\nasync function handleCategory(category) {\n  if (category === 'All categories') {\n    displayTopBooks();\n  } else {\n    displayBooksByCategory(category);\n  }\n}\n\nasync function handleCategoryChange(event) {\n  if (event.target.id === 'categories-select') {\n    handleCategory(event.target.value);\n  }\n}\n\nfunction handleCategoryClick(event) {\n  if (event.target.classList.contains('category-link')) {\n    const category = event.target.dataset.categoryName;\n    handleCategory(category);\n  }\n}\n\nfunction handleShowMore() {\n  page++;\n  displayBookPage();\n}\n\nfunction updateButtonView(current, total) {\n  if (current < total) {\n    showMoreBtn.classList.remove('hidden');\n  } else {\n    showMoreBtn.classList.add('hidden');\n  }\n}\n\nfunction loadPage() {\n  displayCategories();\n  displayTopBooks();\n}\n\nloadPage();\n\ncategoriesContainer.addEventListener('change', handleCategoryChange);\nshowMoreBtn.addEventListener('click', handleShowMore);\ncategoriesContainer.addEventListener('click', handleCategoryClick);\nwindow.addEventListener('resize', reRenderView);\n","import Swiper from \"swiper\";\nimport { Navigation, Pagination, Keyboard, A11y } from \"swiper/modules\";\nimport \"swiper/css\";\nimport \"swiper/css/navigation\";\nimport \"swiper/css/pagination\";\n\nconst feedbackSwiper = new Swiper (\".feedbacks-slider\",\n    {\n        modules: [Navigation, Pagination, Keyboard, A11y],\n\n        slidesPerView: 1,\n        spaceBetween: 24,\n        loop: false,\n\n        navigation:{\n            nextEl: \".feedbacks-swiper-btn-next\",\n            prevEl: \".feedbacks-swiper-btn-prev\",\n            disabledClass: \"arrow--disabled\",\n        },\n\n        pagination: {\n            el: \".feedbacks-swiper-pagination\",\n            clickable: true,\n        },\n\n        keyboard: {\n            enabled: true,\n            onlyInViewport: true,\n        },\n\n        a11y:{\n            enabled: true,\n            prevSlideMessage: \"Попередній відгук\",\n            nextSlideMessage: \"Наступний відгук\",\n        },\n\n        breakpoints: {\n            768: { slidesPerView: 2},\n            1440: { slidesPerView: 3}\n        },\n    }\n);\n\nfunction updateButtons(){\n\n    const prevBtn = document.querySelector(\".feedbacks-swiper-btn-prev\");\n    const nextBtn = document.querySelector(\".feedbacks-swiper-btn-next\");\n\n    prevBtn.disabled = feedbacksSwiper.isBeginning;\n    nextBtn.disabled = feedbacksSwiper.isEnd;\n\n    prevBtn.classList.toggle(\"arrow--disabled\", feedbacksSwiper.isBeginning);\n    nextBtn.classList.toggle(\"arrow--disabled\", feedbacksSwiper.isEnd);\n}\n\nupdateButtons();\n\nfeedbackSwiper.on(\"slideChange\", updateButtons);"],"names":["modalWindow","openModalBtn","closeModalBtn","navLinks","scroll","toggleModal","link","slides","prevBtn","nextBtn","current","showSlide","index","slide","i","flashButton","button","observer","entries","entry","section","axios","booksListContainer","booksShowCounter","categoriesContainer","showMoreBtn","mobileBooksLimit","desktopBooksLimit","booksPerPage","page","books","categories","currentDevice","getDeviceType","getBooksCategoryList","response","error","getTopBooks","getBooksByCategory","category","width","renderSelectCategoriesMarkup","arr","defaultOption","allOption","markup","list_name","renderListCategoriesMarkup","renderBooksListMarkup","_id","book_image","title","author","price","renderView","displayBookPage","displayCategoriesByDevice","reRenderView","newDevice","renderShowCounter","total","displayCategories","displayBooksByCategory","displayTopBooks","element","startCount","booksOnPage","updateButtonView","handleCategory","handleCategoryChange","event","handleCategoryClick","handleShowMore","loadPage","feedbackSwiper","Swiper","Navigation","Pagination","Keyboard","A11y","updateButtons"],"mappings":"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"}